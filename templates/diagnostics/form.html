{% extends "base.html" %}
{% block title %}Novo Diagnóstico - POP{% endblock %}

{% block content %}
<h2 class="text-2xl md:text-3xl font-bold mb-6 border-l-4 border-amber-500 pl-4">Registrar Diagnóstico de SU</h2>

<form method="post" class="bg-white p-6 rounded-lg shadow-md space-y-4">
  {% csrf_token %}
  <div class="grid md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium mb-1">Título</label>
      <input name="title" value="{{ form.title.value|default_if_none:'' }}" required
             class="w-full border rounded-lg px-3 py-2" maxlength="200">
      {% for e in form.title.errors %}<p class="text-red-600 text-sm">{{ e }}</p>{% endfor %}
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Identificador da SU (opcional)</label>
      <input name="su_identifier" value="{{ form.su_identifier.value|default_if_none:'' }}"
             class="w-full border rounded-lg px-3 py-2">
      {% for e in form.su_identifier.errors %}<p class="text-red-600 text-sm">{{ e }}</p>{% endfor %}
    </div>
  </div>

  <div class="grid md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium mb-1">Nome</label>
      <input name="user_name" value="{{ form.user_name.value|default_if_none:'' }}" required
             class="w-full border rounded-lg px-3 py-2">
      {% for e in form.user_name.errors %}<p class="text-red-600 text-sm">{{ e }}</p>{% endfor %}
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Email</label>
      <input name="user_email" type="email" value="{{ form.user_email.value|default_if_none:'' }}" required
             class="w-full border rounded-lg px-3 py-2">
      {% for e in form.user_email.errors %}<p class="text-red-600 text-sm">{{ e }}</p>{% endfor %}
    </div>
  </div>

  <div class="grid md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium mb-1">Categoria</label>
      <select name="category" class="w-full border rounded-lg px-3 py-2">
        {% for val,label in form.fields.category.choices %}
          <option value="{{ val }}" {% if form.category.value == val %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
      {% for e in form.category.errors %}<p class="text-red-600 text-sm">{{ e }}</p>{% endfor %}
    </div>
  </div>

  <div>
    <label class="block text-sm font-medium mb-1">Mensagem de diagnóstico</label>
    <textarea name="message" rows="6" required class="w-full border rounded-lg px-3 py-2">{{ form.message.value }}</textarea>
    {% for e in form.message.errors %}<p class="text-red-600 text-sm">{{ e }}</p>{% endfor %}
  </div>

  <div class="flex items-center gap-3">
    <button class="px-6 py-2 bg-amber-500 text-white font-semibold rounded-lg hover:bg-amber-600 transition">Salvar</button>
    <a href="{% url 'diagnostics:list' %}" class="px-6 py-2 border rounded-lg hover:bg-slate-50">Voltar à busca</a>
  </div>
</form>
{% endblock %}
